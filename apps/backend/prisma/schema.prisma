// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Enum for user types
enum UserType {
  TALENT
  AGENT
  CLUB
}

// Base user model (connects with Firebase Auth)
model User {
  id                String    @id // Firebase UID
  email            String    @unique
  userType         UserType?
  registrationStatus String   // e.g., "PENDING", "COMPLETE", "VERIFIED"
  
  // Basic Info (stored before user type selection)
  fullName         String?
  dateOfBirth      DateTime?
  nationality      String?
  phone            String?
  bio              String?   @db.Text
  address          Json?     // Structured JSON for address details
  
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt

  // Relations
  talent           Talent?
  agent            Agent?
  club             Club?
}

// Talent/Player Profile
model Talent {
  id              String    @id @default(cuid())
  userId          String    @unique
  user            User      @relation(fields: [userId], references: [id])
  
  // Basic Info
  fullName        String
  dateOfBirth     DateTime
  nationality     String

  // Player Specifics
  positions       String[]  // Array of positions
  currentClub     String?
  height          Float?    // in cm
  weight          Float?    // in kg
  preferredFoot   String?

  // Experience
  playingHistory  Json?     // Structured JSON for history
  achievements    Json?     // Structured JSON for achievements

  // Media
  profilePhoto    String?   // URL to photo
  mediaLinks      Json?     // URLs to media (for future)

  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
}

// Agent Profile
model Agent {
  id              String    @id @default(cuid())
  userId          String    @unique
  user            User      @relation(fields: [userId], references: [id])

  // Basic Info
  fullName        String
  companyName     String?
  licenseNumber   String?   @unique

  // Professional Details
  yearsExperience Int?
  operationAreas  String[]  // Array of areas
  languages       String[]  // Array of languages

  // Verification
  licenseDoc      String?   // URL to license document
  references      Json?     // Structured JSON for references
  businessRegDoc  String?   // URL to business registration

  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
}

// Club Profile
model Club {
  id              String    @id @default(cuid())
  userId          String    @unique
  user            User      @relation(fields: [userId], references: [id])

  // Basic Info
  clubName        String
  location        String
  league          String
  country         String

  // Official Details
  registrationNumber String? @unique
  yearFounded     Int?
  website         String?

  // Representative Info
  contactName     String
  position        String
  contactDetails  Json      // Structured JSON for contact details

  // Verification
  officialDocs    String?   // URL to official documents
  leagueAffiliation String? // URL to league affiliation proof

  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
} 